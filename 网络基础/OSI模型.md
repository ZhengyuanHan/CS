开放式系统互联模型（英语：Open System Interconnection Model，缩写：OSI；简称为OSI模型）是一种概念模型，一个试图使各种计算机在世界范围内互连为网络的标准框架。该模型将通信系统中的数据流划分为七个层，从分布式应用程序数据的最高层表示到跨通信介质传输数据的物理实现。每个中间层为其上一层提供功能，其自身功能则由其下一层提供。

### 第7层 应用层
应用层（Application Layer）是用户真正与电脑沟通的点，这一层只有在真正需要访问网络才有作用。该层常见的协议包括：TELNET、HTTP、FTP、SSH、SMTP、WWW、DNS  

| 协议 | 默认端口 |
| --- | --- |
| TELNET | 23 |
| HTTP | 80 |  
| FTP | 主动模式20，被动模式又双端协商，登录认证21 |  
| SSH | 22 |  
| SMTP | 25 |  
| DNS | UDP53和TCP53 |

### 第6层 表现层(表示层)
表现层（Presentation Layer）把数据转换为能与接收者的系统格式兼容并适合传输的格式。该层常见的协议包括：JPEG、MPEG、ASLL

### 第5层 会议层(会话层)
会议层（Session Layer）负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接。该层常见的协议包括：SQL、NFS、NETBIOS、RPC 

***在TCP/IP4层模型中，以上三层统一为应用层***

### 第4层 传输层
传输层（Transport Layer）把传输表头（TH）加至资料以形成分组。（分段）传输表头包含了所使用的协议等发送信息。例如:传输控制协议（TCP）等。该层常见的协议包括：TCP、UDP、SPX。该层以上常见的设备包括：网关。

### 第3层 网络层
网络层（Network Layer）负责处理决定使用哪条路径通过子网的问题。其决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。（分片）网络表头包含了网络资料。例如:互联网协议（IP）等。该层常见的协议包括：IP、IPX、OSFP、RIP、IGRP、ICMP、ARP、RARP。该层常见的设备包括：路由器。 

### 第2层 数据链路层
数据链路层（Data Link Layer）负责网络寻址、错误侦测和改错，可通过重传使丢失或出错的帧能正确到达接收方。其分为两个子层：分为两个子层：逻辑链路控制（logical link control，LLC）子层和介质访问控制（Media access control，MAC）子层。该层常见的协议包括：Ethernet、VLAN、PPP、MAC、IEEE802.3、FR、HDLC。该层常见的设备包括：交换机，网桥。

### 第1层 物理层(物理层)
物理层（Physical Layer）在局域网上传送比特流，它负责管理电脑通信设备和网络媒体之间的互通。该层常见的设备包括：集线器，中继器。

## 不同层之间的数据传输
在发送端，数据通信向下层移动，直到最终通过物理介质传输；而在接收端，数据向上层移动并逐渐解包，直到另一端的应用程序收到数据。
![数据传输中的数据封装](https://github.com/ZhengyuanHan/CS/blob/main/img/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85.png)
### 通俗理解
当你需要给一个同事发个邮件，你新建了一个邮件开始编写，写完邮件正文后，你填好邮件主题，键入收件人的邮件地址。当你点击发送邮件的按钮时，这个发送邮件的通信过程就开始了OSI七层模型旅行之路。

首先来到的是***应用层***。这一层确定了你的邮件是以什么方式发送出去，是SMTP还是IMAP？在发送邮件的同时，你还是浏览网页查阅资料，你在点击每一个链接的时候，应用层确定了是用HTTP还是HTTPS。或者说，用户通过应用程序向应用层提出了一系列应用请求，比如发送邮件、访问网页等。

***表示层***收到了发送邮件的请求，这时它会将需要传输的数据进行编码和转换，形成一种大家都认识的表现形式。我们都知道，不同的操作系统对于文字、语音、图片、视频的编解码方式都是不同的，假如你用的是一台Windows 10操作系统的电脑，而你的同事用的是Mac OS操作系统，虽然操作系统的编码处理方式不同，但在数据传输过程中如果没有一个统一的数据格式的定义，恐怕对方收到数据后恢复出来的内容和你发出的大相径庭，甚至根本就是不可理解的。

通过表示层的处理，数据已经准备好了，接下来就到了***会话层***出马的时候了。你的主机会帮你与邮件服务器建立会话，主机会问服务器：“你好，我是主机，你是邮件服务器吗？我需要和你建立连接。”，服务器会答复说：“你好，我是邮件服务器，连接已经建立。”，这时，发送邮件的会话就算是建立好了，当完成邮件数据传输后，表示层又会断开连接，即终止会话。刚才说过，在发送邮件的同时，你还是浏览网页，你点开了很多个页面，每打开的一个页面都是你和对方建立的一个会话。同时你还在和同事QQ聊天，每个聊天窗口背后其实也是一个会话。会话层就是帮你和对方建立连接的一个过程。就像打电话，你要先和对方接通电话，然后才能开始通话。

建立连接后就可以开始进行数据传输了。***传输层***接收来自应用程序的各种数据：文字、语音、图片、视频，然后将这些数据合并到一个数据流中，再将数据进行分段并编号，最后发送出去。在数据传输的过程中可能会出现各种异常，比如数据包丢失、数据损坏等等，传输层就承担了保证数据传输正确的功能，如流量控制、数据重发等。简单的说，传输层就是表示层准备好数据、会话层建立连接后，正式开始数据传输的第一步。

到了这个时候，数据就要走出家门出去闯荡了。临出门前，你告诉它：“去找邮件服务器吧，它在深圳，门牌号是XX路YY号”。***网络层***可不知道这个门牌号的位置，但是它知道怎么去深圳，就像你从北京寄快递到深圳，快递公司只知道怎么去深圳最快，但你要寄到的这个地址恐怕就只有当地的快递员才知道了。网络层就是快递公司，下面要讲的***数据链路层***就是快递员。网络层了解每个网络的编址、会跟踪设备在网络中的位置、可以准确计算出最佳的数据传输路径。网络层可以计算出从你所在的北京到深圳有哪些路线，哪条路线此时此刻是最快的。

数据终于到了深圳，到了快递员——数据链路层手里，与网络层类似，数据链路层对网络虽然不熟，但是却对本地网络中的每台设备了如指掌。它可以通过硬件地址找到每一台设备。数据链路层从数据这里得知要去XX路YY号，轻而易举地就将数据送了过去。

最后说下***物理层***，这一层就相对简单了，就是信号转换和物理传输，将数据转换成光信号、电信号，然后通过光缆、铜缆传输。

## 一些协议的小知识点
FTP：用于文件传输  
SMTP：用于发送邮件  
POP3：用于接收邮件  
ARP：地址解析，将ip地址转化为相应的物理（MAC）地址，因此也是必须要用到的
